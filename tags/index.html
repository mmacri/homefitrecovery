<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Browse All Tags - Recovery Essentials</title>
    <meta name="description" content="Browse all tags and topics on Recovery Essentials to find content that matches your specific recovery needs and interests.">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="font-sans bg-gray-50">
    <!-- Header will be included here -->
    <div id="header-placeholder"></div>

    <!-- Page Header -->
    <div class="bg-indigo-700 text-white py-16">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl font-bold mb-4">All Tags</h1>
            <p class="text-xl opacity-90">Browse all topics and tags to find the content that interests you most.</p>
        </div>
    </div>

    <!-- Breadcrumb Navigation -->
    <div class="bg-gray-100 py-2">
        <div class="container mx-auto px-4">
            <nav class="text-sm" aria-label="Breadcrumb">
                <ol class="list-none p-0 inline-flex">
                    <li class="flex items-center">
                        <a href="/" class="text-gray-600 hover:text-indigo-600">Home</a>
                        <svg class="fill-current w-3 h-3 mx-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
                    </li>
                    <li class="flex items-center">
                        <a href="/blog/index.html" class="text-gray-600 hover:text-indigo-600">Blog</a>
                        <svg class="fill-current w-3 h-3 mx-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
                    </li>
                    <li class="text-indigo-600">Tags</li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="container mx-auto px-4 py-8">
        <div class="relative max-w-md mx-auto">
            <input type="text" id="tag-search" placeholder="Search tags..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-search text-gray-400"></i>
            </div>
        </div>
    </div>

    <!-- Popular Tags -->
    <div class="container mx-auto px-4 mb-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Popular Tags</h2>
        <div id="popular-tags" class="flex flex-wrap gap-3">
            <!-- Will be dynamically filled -->
            <div class="animate-pulse">
                <div class="h-10 w-32 bg-gray-300 rounded-full"></div>
            </div>
            <div class="animate-pulse">
                <div class="h-10 w-28 bg-gray-300 rounded-full"></div>
            </div>
            <div class="animate-pulse">
                <div class="h-10 w-40 bg-gray-300 rounded-full"></div>
            </div>
            <div class="animate-pulse">
                <div class="h-10 w-24 bg-gray-300 rounded-full"></div>
            </div>
            <div class="animate-pulse">
                <div class="h-10 w-36 bg-gray-300 rounded-full"></div>
            </div>
        </div>
    </div>

    <!-- Tags by Alphabet -->
    <div class="container mx-auto px-4 pb-16">
        <div class="bg-white rounded-lg shadow-sm p-6">
            <!-- Alphabet navigation -->
            <div class="flex flex-wrap gap-2 mb-8 border-b border-gray-200 pb-4">
                <a href="#letter-all" class="tag-letter-link px-3 py-1 rounded hover:bg-indigo-100 font-medium text-indigo-600">All</a>
                <!-- Alphabet letters will be dynamically generated -->
                <div id="alphabet-nav" class="flex flex-wrap gap-2"></div>
            </div>

            <!-- Tag listings by letter -->
            <div id="tags-by-letter" class="space-y-8">
                <!-- Will be dynamically filled -->
                <div class="animate-pulse space-y-4">
                    <div class="h-6 w-12 bg-gray-300 rounded"></div>
                    <div class="flex flex-wrap gap-3">
                        <div class="h-8 w-32 bg-gray-300 rounded-full"></div>
                        <div class="h-8 w-24 bg-gray-300 rounded-full"></div>
                        <div class="h-8 w-28 bg-gray-300 rounded-full"></div>
                    </div>
                </div>

                <div class="animate-pulse space-y-4">
                    <div class="h-6 w-12 bg-gray-300 rounded"></div>
                    <div class="flex flex-wrap gap-3">
                        <div class="h-8 w-36 bg-gray-300 rounded-full"></div>
                        <div class="h-8 w-20 bg-gray-300 rounded-full"></div>
                        <div class="h-8 w-40 bg-gray-300 rounded-full"></div>
                    </div>
                </div>
            </div>

            <!-- Empty state for when no tags match search -->
            <div id="no-tags-found" class="hidden py-12 text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-100 text-indigo-500 mb-4">
                    <i class="fas fa-search text-xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No tags found</h3>
                <p class="text-gray-500 max-w-md mx-auto">
                    No tags match your search. Try a different keyword or browse all tags.
                </p>
                <button id="clear-search" class="mt-4 inline-flex items-center px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-times mr-2"></i> Clear search
                </button>
            </div>
        </div>
    </div>

    <!-- Category Sections -->
    <div class="bg-gray-100 py-12">
        <div class="container mx-auto px-4">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Browse by Category</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Will be dynamically filled -->
                <div id="category-sections"></div>
            </div>
        </div>
    </div>

    <!-- Footer will be included here -->
    <div id="footer-placeholder"></div>

    <!-- JavaScript -->
    <script src="/js/common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadTags();
            loadCategories();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Set up search functionality
            const searchInput = document.getElementById('tag-search');
            searchInput.addEventListener('input', function() {
                filterTags(this.value);
            });

            // Clear search button
            const clearSearchBtn = document.getElementById('clear-search');
            clearSearchBtn.addEventListener('click', function() {
                document.getElementById('tag-search').value = '';
                filterTags('');
            });
        }

        async function loadTags() {
            try {
                // In a real implementation, this would fetch from a server
                // For demo, we'll generate tags from blog posts
                const allTags = await getAllTags();

                // Display popular tags
                displayPopularTags(allTags);

                // Generate alphabet navigation
                generateAlphabetNav(allTags);

                // Display tags by letter
                displayTagsByLetter(allTags);
            } catch (error) {
                console.error('Error loading tags:', error);
            }
        }

        async function getAllTags() {
            // In a real implementation, this would fetch from a server
            // For demo, we'll extract tags from blog posts in localStorage

            let allTags = [];

            // Add predefined popular tags
            const predefinedTags = [
                'massage-guns', 'foam-rolling', 'recovery', 'compression', 'stretching',
                'active-recovery', 'passive-recovery', 'mobility', 'flexibility', 'percussion-therapy',
                'trigger-points', 'muscle-soreness', 'injury-prevention', 'sports-massage',
                'strength-training', 'hydration', 'sleep', 'nutrition', 'myofascial-release',
                'warm-up', 'cool-down', 'workout-recovery', 'performance', 'rehabilitation'
            ];

            // Add tags with count information
            allTags = predefinedTags.map(tag => {
                // Convert slug to name
                const name = tag.split('-').map(word =>
                    word.charAt(0).toUpperCase() + word.slice(1)
                ).join(' ');

                return {
                    slug: tag,
                    name: name,
                    count: Math.floor(Math.random() * 20) + 1 // Random count between 1-20 for demo
                };
            });

            // Sort by name
            allTags.sort((a, b) => a.name.localeCompare(b.name));

            return allTags;
        }

        function displayPopularTags(allTags) {
            const container = document.getElementById('popular-tags');
            container.innerHTML = '';

            // Get top 10 tags by count
            const popularTags = [...allTags]
                .sort((a, b) => b.count - a.count)
                .slice(0, 10);

            popularTags.forEach(tag => {
                const tagElement = createTagElement(tag);
                // Make popular tags slightly larger
                tagElement.className = 'inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 hover:bg-indigo-200 transition';
                container.appendChild(tagElement);
            });
        }

        function generateAlphabetNav(allTags) {
            const container = document.getElementById('alphabet-nav');
            container.innerHTML = '';

            // Get all available first letters
            const letters = [...new Set(allTags.map(tag => tag.name.charAt(0).toUpperCase()))];
            letters.sort();

            // Create letter links
            letters.forEach(letter => {
                const letterLink = document.createElement('a');
                letterLink.href = `#letter-${letter}`;
                letterLink.className = 'tag-letter-link px-3 py-1 rounded hover:bg-indigo-100 font-medium';
                letterLink.textContent = letter;

                letterLink.addEventListener('click', function(e) {
                    document.querySelectorAll('.tag-letter-link').forEach(link => {
                        link.classList.remove('bg-indigo-100', 'text-indigo-600');
                    });
                    this.classList.add('bg-indigo-100', 'text-indigo-600');
                });

                container.appendChild(letterLink);
            });
        }

        function displayTagsByLetter(allTags) {
            const container = document.getElementById('tags-by-letter');
            container.innerHTML = '';

            // Group tags by first letter
            const tagsByLetter = {};
            allTags.forEach(tag => {
                const firstLetter = tag.name.charAt(0).toUpperCase();
                if (!tagsByLetter[firstLetter]) {
                    tagsByLetter[firstLetter] = [];
                }
                tagsByLetter[firstLetter].push(tag);
            });

            // Sort letters alphabetically
            const sortedLetters = Object.keys(tagsByLetter).sort();

            // Create a section for each letter
            sortedLetters.forEach(letter => {
                const letterSection = document.createElement('div');
                letterSection.id = `letter-${letter}`;
                letterSection.className = 'tag-letter-section';

                // Letter heading
                const letterHeading = document.createElement('h3');
                letterHeading.className = 'text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-200';
                letterHeading.textContent = letter;
                letterSection.appendChild(letterHeading);

                // Tags container
                const tagsContainer = document.createElement('div');
                tagsContainer.className = 'flex flex-wrap gap-3';

                // Add tags for this letter
                tagsByLetter[letter].forEach(tag => {
                    const tagElement = createTagElement(tag);
                    tagsContainer.appendChild(tagElement);
                });

                letterSection.appendChild(tagsContainer);
                container.appendChild(letterSection);
            });
        }

        function createTagElement(tag) {
            const tagElement = document.createElement('a');
            tagElement.href = `/tags/${tag.slug}.html`;
            tagElement.className = 'tag-item inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 hover:bg-indigo-100 hover:text-indigo-800 transition';
            tagElement.dataset.tagName = tag.name.toLowerCase();
            tagElement.innerHTML = `
                <i class="fas fa-tag mr-1 text-xs"></i>
                ${tag.name}
                <span class="ml-1 text-xs text-gray-500">(${tag.count})</span>
            `;
            return tagElement;
        }

        function filterTags(searchTerm) {
            const normalizedSearchTerm = searchTerm.trim().toLowerCase();
            const tagElements = document.querySelectorAll('.tag-item');
            const letterSections = document.querySelectorAll('.tag-letter-section');
            const noTagsFound = document.getElementById('no-tags-found');

            let foundAny = false;

            letterSections.forEach(section => {
                let foundInSection = false;
                const tagsInSection = section.querySelectorAll('.tag-item');

                tagsInSection.forEach(tag => {
                    const tagName = tag.dataset.tagName;
                    if (!normalizedSearchTerm || tagName.includes(normalizedSearchTerm)) {
                        tag.classList.remove('hidden');
                        foundInSection = true;
                        foundAny = true;
                    } else {
                        tag.classList.add('hidden');
                    }
                });

                if (foundInSection) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });

            if (foundAny) {
                noTagsFound.classList.add('hidden');
            } else {
                noTagsFound.classList.remove('hidden');
            }
        }

        function loadCategories() {
            const categories = [
                {
                    slug: 'massage-therapy',
                    name: 'Massage Therapy',
                    description: 'Discover various massage therapy techniques and tools.',
                    icon: 'fas fa-hands'
                },
                {
                    slug: 'recovery-techniques',
                    name: 'Recovery Techniques',
                    description: 'Learn the most effective recovery strategies and techniques.',
                    icon: 'fas fa-heartbeat'
                },
                {
                    slug: 'product-guides',
                    name: 'Product Guides',
                    description: 'Comprehensive guides and reviews of recovery equipment.',
                    icon: 'fas fa-shopping-cart'
                },
                {
                    slug: 'fitness',
                    name: 'Fitness',
                    description: 'Exercise tips and workout routines to complement recovery.',
                    icon: 'fas fa-dumbbell'
                },
                {
                    slug: 'injury-prevention',
                    name: 'Injury Prevention',
                    description: 'Strategies to avoid common fitness-related injuries.',
                    icon: 'fas fa-medkit'
                }
            ];

            const container = document.getElementById('category-sections');
            container.innerHTML = '';

            categories.forEach(category => {
                const categoryCard = document.createElement('a');
                categoryCard.href = `/categories/${category.slug}.html`;
                categoryCard.className = 'block bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300';

                categoryCard.innerHTML = `
                    <div class="p-6">
                        <div class="w-12 h-12 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center mb-4">
                            <i class="${category.icon}"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 mb-2">${category.name}</h3>
                        <p class="text-gray-600">${category.description}</p>
                    </div>
                `;

                container.appendChild(categoryCard);
            });
        }
    </script>
</body>
</html>
